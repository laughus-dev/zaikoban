# 飲食店向け在庫管理アプリ 要件定義書

## 1. プロジェクト概要

### アプリケーション名

**在庫番（ザイコバン）**

### プロジェクト名（開発用）

- **プロジェクトID**: `zaikoban`
- **リポジトリ名**: `zaikoban-app`
- **パッケージ名**: `com.zaikoban.app`
- **データベース名**: `zaikoban_db`

### 1.1 目的

飲食店における食材・備品の在庫管理を効率化し、適切な発注タイミングの把握、食材ロスの削減、棚卸し作業の簡素化を実現する。

### 1.2 対象ユーザー

- 飲食店のオーナー・店長
- 厨房スタッフ
- 在庫管理担当者

### 1.3 利用環境

- タブレット（iPad、Androidタブレット）
- PC（Windows、Mac）のWebブラウザ
- スマートフォン（補助的な利用）

## 2. 機能要件

### 2.1 ユーザー管理

- **ログイン/ログアウト機能**
    - メールアドレス/パスワード認証
    - 権限管理（管理者/一般スタッフ）
- **マルチ店舗対応**
    - 店舗切り替え機能
    - 店舗間の在庫移動

### 2.2 商品マスタ管理

- **商品登録**
    - 商品名、カテゴリ、単位、原価
    - バーコード/QRコード登録
    - 商品画像アップロード
    - アレルゲン情報
- **カテゴリ管理**
    - 食材（肉類、野菜、調味料等）
    - 備品（消耗品、包材等）
    - ドリンク類
- **仕入先管理**
    - 業者情報登録
    - 発注先の紐付け

### 2.3 在庫管理機能

- **入庫処理**
    - 納品登録（手動/バーコード読取）
    - 仕入先・仕入価格の記録
    - 賞味期限管理
- **出庫処理**
    - 使用登録
    - 廃棄登録（理由付き）
    - レシピ連動での自動減算
- **在庫照会**
    - リアルタイム在庫数表示
    - 在庫金額の算出
    - 賞味期限アラート

### 2.4 棚卸し機能

- **棚卸し実施**
    - 理論在庫と実在庫の差異確認
    - バーコード読取での効率化
    - 棚卸し履歴管理
- **差異分析**
    - ロス率の可視化
    - 原因別集計

### 2.5 発注管理

- **発注点管理**
    - 商品別の発注点設定
    - 安全在庫の設定
- **発注書作成**
    - 自動発注提案
    - 発注書PDF出力
    - メール/FAX連携
- **発注履歴**
    - 過去の発注履歴確認
    - 発注頻度分析

### 2.6 レポート・分析

- **ダッシュボード**
    - 在庫金額推移
    - 回転率表示
    - アラート一覧
- **各種レポート**
    - ABC分析
    - 在庫推移グラフ
    - ロス分析レポート
    - 仕入原価レポート

### 2.7 アラート機能

- **在庫アラート**
    - 在庫切れ警告
    - 過剰在庫警告
    - 賞味期限切れ警告
- **通知方法**
    - アプリ内通知
    - メール通知
    - LINE通知（オプション）

### 2.8 その他機能

- **データ入出力**
    - CSV/Excelインポート・エクスポート
    - バックアップ機能
- **バーコード対応**
    - カメラでの読取
    - 専用スキャナー対応

## 3. 非機能要件

### 3.1 パフォーマンス

- 画面遷移: 2秒以内
- 検索処理: 3秒以内
- 同時接続数: 10ユーザー/店舗

### 3.2 セキュリティ

- HTTPS通信
- データ暗号化
- 定期的な自動バックアップ
- セッション管理

### 3.3 ユーザビリティ

- 直感的なUI設計
- タッチ操作最適化
- オフライン時の一時保存機能
- 多言語対応（日本語/英語）

### 3.4 可用性

- 稼働率: 99.5%以上
- 計画停止: 月1回深夜メンテナンス

## 4. 技術要件

### 4.1 フロントエンド

- **フレームワーク**: Next.js 14+
- **UIライブラリ**: React 18+
- **UIコンポーネント**: Chakra UI
- **状態管理**: Zustand or Redux Toolkit
- **フォーム**: React Hook Form
- **グラフ**: Chart.js or Recharts

### 4.2 バックエンド

- **APIルート**: Next.js API Routes
- **認証**: NextAuth.js
- **ORM**: Prisma
- **バリデーション**: Zod

### 4.3 データベース

- **本番環境**: MySQL 8.0
- **開発環境**: MySQL 8.0
- **ホスティング候補**:
    - PlanetScale（MySQL互換、スケーラブル）
    - Railway（簡単デプロイ）
    - 自前のVPS + MySQL

### 4.4 インフラ・ホスティング

- **ホスティング**: Vercel
- **画像ストレージ**: Cloudinary or Supabase Storage
- **CDN**: Vercel Edge Network

### 4.5 PWA対応

- **ライブラリ**: next-pwa
- **機能**:
    - オフライン対応
    - インストール可能
    - プッシュ通知

### 4.6 開発環境

- **バージョン管理**: Git/GitHub
- **パッケージ管理**: npm or pnpm
- **コード品質**:
    - ESLint
    - Prettier
    - TypeScript

### 4.7 テスト

- **単体テスト**: Jest
- **E2Eテスト**: Playwright
- **コンポーネントテスト**: React Testing Library

### 4.8 その他ツール

- **バーコード読取**: QuaggaJS or ZXing
- **PDF生成**: jsPDF
- **Excel処理**: SheetJS
- **メール送信**: SendGrid or Resend

## 5. 画面構成

### 5.1 主要画面一覧

1. **ログイン画面**
2. **ダッシュボード**
3. **在庫一覧画面**
4. **商品マスタ画面**
5. **入出庫登録画面**
6. **棚卸し画面**
7. **発注管理画面**
8. **レポート画面**
9. **設定画面**

### 5.2 画面遷移

- サイドバーナビゲーション（PC）
- ボトムタブナビゲーション（タブレット縦向き）
- ハンバーガーメニュー（スマートフォン）

## 6. データモデル（主要エンティティ）

### 6.1 基本エンティティ

- **Users**: ユーザー情報
- **Stores**: 店舗情報
- **Products**: 商品マスタ
- **Categories**: カテゴリマスタ
- **Suppliers**: 仕入先マスタ

### 6.2 トランザクション

- **StockTransactions**: 在庫取引
- **Orders**: 発注情報
- **Inventories**: 棚卸し情報
- **CurrentStock**: 現在在庫

## 7. 開発フェーズ

### Phase 1: MVP版（2-3週間）

- ユーザー認証
- 商品マスタ管理
- 基本的な入出庫
- 在庫一覧表示

### Phase 2: 基本機能追加（3-4週間）

- 棚卸し機能
- 発注管理
- 基本レポート
- バーコード読取

### Phase 3: 高度な機能（4-5週間）

- 詳細な分析機能
- 自動発注
- 通知機能
- マルチ店舗対応

### Phase 4: 最適化（2週間）

- パフォーマンス改善
- UI/UX改善
- バグ修正

## 8. 成功指標（KPI）

- 棚卸し作業時間: 50%削減
- 食材ロス率: 30%削減
- 欠品発生率: 70%削減
- 発注作業時間: 40%削減

## 9. 制約事項

- 初期導入コストを抑える
- 既存のPOSシステムとの連携は第2フェーズ以降
- 操作研修は最小限で済むUI設計

## 10. 今後の拡張予定

- POSシステム連携
- AIによる需要予測
- 複数店舗の統合管理
- 会計システム連携
- スマートスピーカー対応